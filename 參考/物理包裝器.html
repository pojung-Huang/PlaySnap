<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>ç‰©ç†åŒ…è£å™¨</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            padding: 1.5rem;
        }

        .controls {
            display: flex;
            gap: 1rem;
        }

        .button {
            padding: 0.5rem 1rem;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .button:hover {
            background: #45a049;
        }

        .physics-container {
            height: 30rem;
            width: 100%;
            border: 1px solid #ccc;
            position: relative;
            overflow: hidden;
        }

        .physics-item {
            position: absolute;
            padding: 0.5rem 1rem;
            background: white;
            border: 1px solid #ccc;
            border-radius: 4px;
            white-space: nowrap;
            transform-origin: center;
            cursor: default;
            user-select: none;
        }

        .title {
            font-size: 1.5rem;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="controls">
        <button class="button" onclick="startPhysics()">é–‹å§‹</button>
        <button class="button" onclick="resetPhysics()">é‡ç½®</button>
    </div>

    <div class="physics-container" id="physicsWorld">
        <div class="physics-item title">IT èªéŒ„</div>
        <div class="physics-item">ä¸–ç•Œä¸Šæœ‰ 10 ç¨®äºº</div>
        <div class="physics-item">ä¸€ç¨®æ‡‚äºŒé€²ä½</div>
        <div class="physics-item">ä¸€ç¨®ä¸æ‡‚</div>
        <div class="physics-item">è¦æ”¹çš„å¤ªå¤šäº†</div>
        <div class="physics-item">ä¸å¦‚æ”¹å¤©å§</div>
        <div class="physics-item">åœ¨æˆ‘çš„æ©Ÿå™¨ä¸Šå¯ä»¥ work</div>
        <div class="physics-item">é€™ä¸æ˜¯ bug</div>
        <div class="physics-item">é€™æ˜¯ feature</div>
        <div class="physics-item">ä½ æœ‰è©¦éé‡å•Ÿå—ï¼Ÿ</div>
        <div class="physics-item">æ˜¨å¤©é‚„å¥½å¥½çš„ ğŸŸ</div>
    </div>

    <script>
        let engine, render, world;
        const bodies = new Map();
        let isRunning = false;
        const originalPositions = new Map();

        // åˆå§‹åŒ–ç‰©ç†å¼•æ“
        function initPhysics() {
            engine = Matter.Engine.create();
            world = engine.world;
            world.gravity.y = 1;

            const container = document.getElementById('physicsWorld');
            const items = container.getElementsByClassName('physics-item');

            // è¨˜éŒ„åŸå§‹ä½ç½®ä¸¦å‰µå»ºç‰©ç†ç‰©é«”
            Array.from(items).forEach(item => {
                const rect = item.getBoundingClientRect();
                const containerRect = container.getBoundingClientRect();

                // å„²å­˜åŸå§‹ä½ç½®
                originalPositions.set(item, {
                    x: rect.left - containerRect.left,
                    y: rect.top - containerRect.top
                });

                // å‰µå»ºç‰©ç†ç‰©é«”
                const body = Matter.Bodies.rectangle(
                    rect.left - containerRect.left + rect.width / 2,
                    rect.top - containerRect.top + rect.height / 2,
                    rect.width,
                    rect.height,
                    {
                        restitution: 0.8,
                        friction: 0.005,
                        frictionAir: 0.005
                    }
                );

                bodies.set(item, body);
                Matter.Composite.add(world, body);
            });

            // æ·»åŠ é‚Šç•Œ
            const walls = [
                Matter.Bodies.rectangle(container.clientWidth / 2, -10, container.clientWidth, 20, { isStatic: true }), // ä¸Š
                Matter.Bodies.rectangle(container.clientWidth / 2, container.clientHeight + 10, container.clientWidth, 20, { isStatic: true }), // ä¸‹
                Matter.Bodies.rectangle(-10, container.clientHeight / 2, 20, container.clientHeight, { isStatic: true }), // å·¦
                Matter.Bodies.rectangle(container.clientWidth + 10, container.clientHeight / 2, 20, container.clientHeight, { isStatic: true }) // å³
            ];
            Matter.Composite.add(world, walls);
        }

        // æ›´æ–° DOM å…ƒç´ ä½ç½®
        function updateElements() {
            bodies.forEach((body, element) => {
                element.style.transform = `translate(${body.position.x - element.offsetWidth / 2}px, 
                                                   ${body.position.y - element.offsetHeight / 2}px) 
                                         rotate(${body.angle}rad)`;
            });
            if (isRunning) {
                requestAnimationFrame(updateElements);
            }
        }

        // é–‹å§‹ç‰©ç†æ¨¡æ“¬
        function startPhysics() {
            if (!isRunning) {
                isRunning = true;
                Matter.Engine.run(engine);
                updateElements();
            }
        }

        // é‡ç½®ä½ç½®
        function resetPhysics() {
            isRunning = false;
            Matter.Engine.clear(engine);
            bodies.forEach((body, element) => {
                const pos = originalPositions.get(element);
                element.style.transform = `translate(${pos.x}px, ${pos.y}px) rotate(0rad)`;
            });
            initPhysics();
        }

        // åˆå§‹åŒ–
        initPhysics();
    </script>
</body>

</html>